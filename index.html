<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
      function getNewTimetable(day) {
        var x = prompt("The timetable for " + day + " is greater than 64. Please enter another.");
        if (x.length > 64) {
          return getNewTimetable(day);
        } else {
          return x
        }
      }
    </script>
    <script>
      $(function() {
        $("#submit").click(function() {
          
          var sun = $("#sunday_timetable").val();
          if (sun.length > 64) {
            sun = getNewTimetable("Sunday");
          }
          
          var mon = $("#monday_timetable").val();
          if (mon.length > 64) {
            mon = getNewTimetable("Monday");
          }
          var tue = $("#tuesday_timetable").val();
          if (tue.length > 64) {
            tue = getNewTimetable("Tuesday");
          }
          var wed = $("#wednesday_timetable").val();
          if (wed.length > 64) {
            wed = getNewTimetable("Wednesday");
          }
          var thu = $("#thursday_timetable").val();
          if (thu.length > 64) {
            thu = getNewTimetable("Thursday");
          }
          var fri = $("#friday_timetable").val();
          if (fri.length > 64) {
            fri = getNewTimetable("Friday");
          }
          var sat = $("#saturday_timetable").val();
          if (sat.length > 64) {
            sat = getNewTimetable("Saturday");
          }
          
          var options = {
            "sun": sun,
            "mon": mon,
            "tue": tue,
            "wed": wed,
            "thu": thu,
            "fri": fri,
            "sat": sat
          };
          optionsToSend = encodeURIComponent(JSON.stringify(options));
          
          document.location = "pebblejs://close#" + optionsToSend;
        });
      });
    </script>
  </head>
  <body>
    <h1>Timetable time configuration</h1><br>
    
    <div class="options">
      <h2>Sunday</h2><br>
      <textarea id="sunday_timetable"></textarea><br>
      <h2>Monday</h2><br>
      <textarea id="monday_timetable"></textarea><br>
      <h2>Tuesday</h2><br>
      <textarea id="tuesday_timetable"></textarea><br>
      <h2>Wednesday</h2><br>
      <textarea id="wednesday_timetable"></textarea><br>
      <h2>Thrusday</h2><br>
      <textarea id="thursday_timetable"></textarea><br>
      <h2>Friday</h2><br>
      <textarea id="friday_timetable"></textarea><br>
      <h2>Saturday</h2><br>
      <textarea id="saturday_timetable"></textarea><br>
      For each text box, enter the timetable for that day. For a new line, write the character "\n".<br>
      <button id="submit">Send options</button>
    </div>
  </body>
</html>
